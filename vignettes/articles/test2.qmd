---
format: html
---

```{r}
devtools::load_all()
library(tidyverse)
full_data = trax_gp34_v1
n_missing_CGG = full_data$CGG |> is.na() |> sum()
n_above_200 = sum(full_data$CGG >= 200, na.rm = TRUE)
v1_usable = full_data |> filter(CGG < 200) |> 
  mutate(`FX3*` = `FX3*` |> droplevels())
```


```{r}
#| label: "tbl-demographics"
#| tbl-cap: "test"

biomarker_groups = compile_biomarker_groups_table()

biomarker_varnames = 
  biomarker_groups |> 
  pull("biomarker")

biomarker_levels = 
  v1_usable |> 
  dplyr::select(all_of(biomarker_varnames)) |> 
  lapply(F = levels)

biomarker_events_table =
  construct_biomarker_events_table(
    biomarker_levels,
    biomarker_groups)

biomarkers_table = 
  v1_usable |> make_biomarkers_table(biomarker_varnames = biomarker_varnames)

```

We found significant evidence of sex differences in `r report_sex_differences(biomarkers_table)`.
